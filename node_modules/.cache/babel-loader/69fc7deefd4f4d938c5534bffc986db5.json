{"ast":null,"code":"import _classCallCheck from \"/Users/TTN/merp_react_web_dev/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/TTN/merp_react_web_dev/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/TTN/merp_react_web_dev/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/TTN/merp_react_web_dev/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/TTN/merp_react_web_dev/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/TTN/merp_react_web_dev/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/TTN/merp_react_web_dev/src/compose.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Home from './Home';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\n\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nimport { BrowserRouter as Router, NavLink, Switch, Link, Route, HashRouter } from 'react-router-dom';\n\nvar compose =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(compose, _Component);\n\n  function compose(props) {\n    var _this;\n\n    _classCallCheck(this, compose);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(compose).call(this, props));\n    _this.state = {\n      ObjLocation: [],\n      isLoggedIn: false,\n      message: '',\n      group: '',\n      destination: '',\n      replyall: '',\n      fields: {},\n      render: false\n    };\n    _this.redirectDashboard = _this.redirectDashboard.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(compose, [{\n    key: \"logout\",\n    value: function logout() {\n      if (window.confirm(\"Are you sure you want to log out?\")) {\n        localStorage.clear();\n        window.location.href = '/';\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getLocationList();\n    }\n  }, {\n    key: \"getLocationList\",\n    value: function getLocationList() {\n      var session = localStorage.getItem(\"session\");\n      var session_array = JSON.parse(session);\n      this.setState({\n        ObjLocation: session_array.location\n      });\n    }\n  }, {\n    key: \"handleChangeName\",\n    value: function handleChangeName(field, e) {\n      var fields = this.state.fields;\n      fields[field] = e.target.value;\n      this.setState({\n        fields: fields\n      });\n    }\n  }, {\n    key: \"redirectDashboard\",\n    value: function redirectDashboard() {\n      this.props.history.push('/Collection');\n    }\n  }, {\n    key: \"handleValidation\",\n    value: function handleValidation() {\n      var fields = this.state.fields;\n      var errors = {};\n      var formIsValid = true;\n      var res = this.menu.value;\n      var destination = this.destination.value;\n      var replyall = this.replyall.value;\n      var session = localStorage.getItem(\"session\");\n      var session_array = JSON.parse(session);\n      var userid = session_array.id;\n      var organizationid = session_array.organization_id; //param \n\n      fields[\"action\"] = \"sendMessage\";\n      fields[\"group\"] = res;\n      fields[\"destination\"] = destination;\n      fields[\"replyall\"] = replyall;\n      fields[\"userid\"] = userid;\n      fields[\"organizationid\"] = organizationid; //message\n\n      if (!fields[\"message\"]) {\n        formIsValid = false;\n        errors[\"message\"] = \"failed to send message\";\n      }\n\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n    }\n  }, {\n    key: \"messageSubmit\",\n    value: function messageSubmit(e) {\n      e.preventDefault();\n\n      if (this.handleValidation()) {\n        this.createMessageApi();\n        console.log(this.state.fields);\n      } else {\n        alert(\"failed to send message\");\n      }\n    }\n  }, {\n    key: \"createMessageApi\",\n    value: function createMessageApi() {\n      var _this2 = this;\n\n      fetch(global.api_url, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state.fields)\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        var status = response.status;\n\n        if (status === \"true\") {\n          _this2.props.history.push('/messages');\n        } else {\n          alert(\"Something went wrong, please try again\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (localStorage.getItem('session')) {\n        var locationList = this.state.ObjLocation.map(function (v) {\n          return React.createElement(\"option\", {\n            value: v.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, v.name);\n        });\n        return React.createElement(\"div\", {\n          id: \"ember361\",\n          className: \"ember-view ember-app\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"menu\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          className: \"home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: this.redirectDashboard,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"h\")), React.createElement(\"li\", {\n          className: \"back\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, \"M\")), React.createElement(\"li\", {\n          className: \"titlebar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, \"Messages\"), React.createElement(\"li\", {\n          className: \"refresh\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, \"\\u27F3\")), React.createElement(\"li\", {\n          className: \"edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \"Edit\")))), React.createElement(\"div\", {\n          id: \"application\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"conversation\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          className: \"messages messages-inner\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          acceptCharset: \"UTF-8\",\n          onSubmit: this.messageSubmit.bind(this),\n          name: \"messageForm\",\n          id: \"messageForm\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          className: \"composemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"Send a Message\"), React.createElement(\"textarea\", {\n          id: \"ember1961\",\n          className: \"ember-view ember-text-area js-auto-size\",\n          name: \"message\",\n          onChange: this.handleChangeName.bind(this, \"message\"),\n          value: this.state.fields[\"message\"],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"Group / Building (optional)\"), React.createElement(\"div\", {\n          className: \"select-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          name: \"group\",\n          disabled: true,\n          ref: function ref(input) {\n            return _this3.menu = input;\n          },\n          value: this.state.fields[\"group\"],\n          onChange: this.handleChangeName.bind(this, \"group\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, locationList)), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, \"Send to All / Incident Commanders\"), React.createElement(\"div\", {\n          className: \"select-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          name: \"destination\",\n          ref: function ref(input) {\n            return _this3.destination = input;\n          },\n          value: this.state.fields[\"destination\"],\n          onChange: this.handleChangeName.bind(this, \"destination\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"commander\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Incident Commanders\"), React.createElement(\"option\", {\n          value: \"all\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, \"All\"))), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, \"Reply to All / Sender Only\"), React.createElement(\"div\", {\n          className: \"select-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          name: \"replyall\",\n          ref: function ref(input) {\n            return _this3.replyall = input;\n          },\n          value: this.state.fields[\"replyall\"],\n          onChange: this.handleChangeName.bind(this, \"replyall\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"all\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, \"Reply All\"), React.createElement(\"option\", {\n          value: \"sender\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, \"Sender Only\"))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          className: \"message-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, \"Send Message\")))))));\n      } else {\n        window.location.href = '/';\n      }\n    }\n  }]);\n\n  return compose;\n}(Component);\n\nexport default compose;","map":{"version":3,"sources":["/Users/TTN/merp_react_web_dev/src/compose.js"],"names":["React","Component","Home","confirmAlert","BrowserRouter","Router","NavLink","Switch","Link","Route","HashRouter","compose","props","state","ObjLocation","isLoggedIn","message","group","destination","replyall","fields","render","redirectDashboard","bind","window","confirm","localStorage","clear","location","href","getLocationList","session","getItem","session_array","JSON","parse","setState","field","e","target","value","history","push","errors","formIsValid","res","menu","userid","id","organizationid","organization_id","preventDefault","handleValidation","createMessageApi","console","log","alert","fetch","global","api_url","method","headers","Accept","body","stringify","then","response","json","status","locationList","map","v","name","messageSubmit","handleChangeName","input"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Home from './Home';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport { BrowserRouter as Router, NavLink, Switch, Link, Route ,HashRouter} from 'react-router-dom';\nclass compose extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n\t\t   ObjLocation: [],\t\n\t\t   isLoggedIn: false,\n\t\t   message:'',\n\t\t   group:'',\n\t\t   destination:'',\n\t\t   replyall:'',\n\t\t   fields: {},\n\t\t   render: false\n        }\n\t\tthis.redirectDashboard=this.redirectDashboard.bind(this);\n     }\n\n    logout() {\n    if (window.confirm(\"Are you sure you want to log out?\")) {\n    localStorage.clear();\n    window.location.href = '/';\n    }\n  }\n  \n  componentDidMount(){\n  this.getLocationList();\t  \n  }\n   getLocationList()\n  {\n\t  let session= localStorage.getItem(\"session\");\n      let session_array=JSON.parse(session);\n\t  this.setState({\n          ObjLocation: session_array.location\n      })\n  }\n  handleChangeName(field, e){         \n  let fields = this.state.fields;\n  fields[field] = e.target.value;        \n  this.setState({fields});\n  }\n  redirectDashboard(){\n  this.props.history.push('/Collection');\n  }\n  handleValidation(){\n      let fields = this.state.fields;\n      let errors = {};\n      let formIsValid = true;\n\t  let res = this.menu.value;\n\t  let destination = this.destination.value;\n\t  let replyall = this.replyall.value;\n\t  let session= localStorage.getItem(\"session\");\n      let session_array=JSON.parse(session);\n\t  let userid = session_array.id;\n\t  let organizationid = session_array.organization_id;\n     //param \n     fields[\"action\"]=\"sendMessage\";\n\t fields[\"group\"]=res;\n\t fields[\"destination\"]=destination;\n\t fields[\"replyall\"]=replyall;\n\t fields[\"userid\"]=userid;\n\t fields[\"organizationid\"]=organizationid;\n      //message\n      if(!fields[\"message\"]){\n         formIsValid = false;\n         errors[\"message\"] = \"failed to send message\";\n      }\n     this.setState({errors: errors});\n     return formIsValid;\n    }\n\t\n\tmessageSubmit(e){\n      e.preventDefault();\n      if(this.handleValidation()){\n        this.createMessageApi();\n        console.log(this.state.fields);\n      }else{\n         alert(\"failed to send message\");\n      }\n    }\n\t\n\tcreateMessageApi()\n    {\n      fetch(global.api_url,\n      {\n          method: 'POST',\n          headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json'                 \n          },\n          body: JSON.stringify(this.state.fields)\n      })\n      .then((response) => response.json())\n      .then((response) => {\n\n           const status=response.status;\n           if(status === \"true\")\n           {\n              this.props.history.push('/messages');\n           }\n           else{\n              alert(\"Something went wrong, please try again\");\n           }\n      });\n    }\n \n  render() {\nif (localStorage.getItem('session')) {\nlet locationList = this.state.ObjLocation.map(v => (\n\t  <option value={v.id}>{v.name}</option>\n    ));\t\n return (\n    <div id=\"ember361\" className=\"ember-view ember-app\"><div className=\"menu\">\n        <ul>\n          <li className=\"home\"><a onClick= {this.redirectDashboard}>h</a></li>\n          <li className=\"back\"><a>M</a></li>\n          <li className=\"titlebar\">Messages</li>\n          <li className=\"refresh\"><a>‚ü≥</a></li>\n          <li className=\"edit\"><a>Edit</a></li>\n        </ul>\n      </div>\n      <div id=\"application\">\n        <div className=\"conversation\">\n        <ul className=\"messages messages-inner\">\n\t\t  <form acceptCharset=\"UTF-8\"\n\t\t  onSubmit= {this.messageSubmit.bind(this)}\n\t\t  name=\"messageForm\"\n\t\t  id=\"messageForm\">\n          <li className=\"composemessage\">\n            <span>Send a Message</span>\n            <textarea id=\"ember1961\"\n\t\t\tclassName=\"ember-view ember-text-area js-auto-size\"\n\t\t\tname=\"message\"\n\t\t\tonChange={this.handleChangeName.bind(this, \"message\")}\n            value={this.state.fields[\"message\"]}\n\t\t\t></textarea>\n            <span>Group / Building (optional)</span>\n            <div className=\"select-wrapper\">\n              <select \n\t\t\t  name=\"group\"\n\t\t\t  disabled={true}\n\t\t\t  ref = {(input)=> this.menu = input}\n\t\t\t  value={this.state.fields[\"group\"]}\n              onChange={this.handleChangeName.bind(this, \"group\")}>\n                  {locationList}\n              </select>\n            </div>\n            <span>Send to All / Incident Commanders</span>\n            <div className=\"select-wrapper\">\n              <select \n\t\t\t  name=\"destination\"\n\t\t\t  ref = {(input)=> this.destination = input}\n\t\t\t  value={this.state.fields[\"destination\"]}\n              onChange={this.handleChangeName.bind(this, \"destination\")}>\n                <option value=\"commander\">Incident Commanders</option>\n                <option value=\"all\">All</option>\n              </select>\n            </div>\n            <span>Reply to All / Sender Only</span>\n            <div className=\"select-wrapper\">\n              <select\n\t\t\t  name=\"replyall\"\n\t\t\t  ref = {(input)=> this.replyall = input}\n\t\t\t  value={this.state.fields[\"replyall\"]}\n              onChange={this.handleChangeName.bind(this, \"replyall\")}>\n                <option value=\"all\">Reply All</option>\n                <option value=\"sender\">Sender Only</option>\n              </select>\n            </div><br/>\n            <button className=\"message-button\">Send Message</button>\n          </li>\n        </form>\n        </ul>\n      </div>\n      </div>\n      </div>\n    );\n} else {\n window.location.href = '/';\n}\t\n}\n}\nexport default compose;"]},"metadata":{},"sourceType":"module"}